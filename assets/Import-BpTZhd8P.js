import{_ as f,g as c,l as m,r as p,o as g,c as h,b as n,k as l,d as o,t as y}from"./index-x0cUaSJO.js";import{u as v}from"./links-CwZHDahQ.js";const k={props:["data"],data(){return{popups:c(),links:v(),about:m(),filetypes:{Shlink:[".csv"],YOURLS:[".csv"],Lynx:[".json",".csv"]},file:{data:null,name:null},dragging:!1}},methods:{back(){this.popups.closeSelf(this)},handleDragStart(){this.dragging=!0},handleDragEnd(){this.dragging=!1},uploadFile(){this.$refs.fileInput.click()},handleDragOver(t){t.preventDefault()},handleDrop(t){if(t.preventDefault(),t.dataTransfer.items){let e=[...t.dataTransfer.items][0];e=e.getAsFile(),this.file.data=e,this.file.name=e.name}},fileUpload(){const t=this.$refs.fileInput.files[0];this.file.data=t,this.file.name=t.name},async upload(){const t=await this.links.import({file:this.file.data,service:this.data.service});if(!t.success)this.popups.addPopup("Information",{title:"Error completing import",description:t.message||"Please try again later",buttons:[{name:"Retry",type:"secondary",action:"return"},{name:"Okay",type:"primary",action:"close-all"}]});else{if(this.about.track(`Imported links from ${this.data.service}`),this.popups.closeSelf(this),this.account.preferences.reducedPopups)return;this.popups.addPopup("Information",{title:"Successfully completed import",description:t.message,buttons:[{name:"Okay",type:"primary",action:"refresh"}]})}}}},b={class:"import"},D={class:"upload"},_=["dragging"],I=["accept"],x={class:"buttons"};function C(t,e,d,S,a,s){const u=p("font-awesome-icon"),r=p("FormKit");return g(),h("div",b,[e[6]||(e[6]=n("h2",null,"Upload your exported data",-1)),n("div",D,[n("div",{class:"uploadBox",onClick:e[0]||(e[0]=(...i)=>s.uploadFile&&s.uploadFile(...i)),onDrop:e[1]||(e[1]=(...i)=>s.handleDrop&&s.handleDrop(...i)),onDragover:e[2]||(e[2]=l(()=>{},["prevent"])),onDragenter:e[3]||(e[3]=l(i=>a.dragging=!0,["self"])),onDragleave:e[4]||(e[4]=l(i=>a.dragging=!1,["self"])),dragging:a.dragging},[o(u,{icon:a.file.data?"file":"file-arrow-up"},null,8,["icon"]),n("p",null,y(a.file.name),1)],40,_),n("input",{type:"file",accept:a.filetypes[d.data.service],ref:"fileInput",onChange:e[5]||(e[5]=(...i)=>s.fileUpload&&s.fileUpload(...i))},null,40,I)]),n("div",x,[o(r,{type:"button",label:"Back","button-type":"secondary",onClick:s.back},null,8,["onClick"]),o(r,{type:"button",label:"Next","button-type":"primary",onClick:s.upload,disabled:!a.file.data},null,8,["onClick","disabled"])])])}const B=f(k,[["render",C],["__scopeId","data-v-d948fde3"]]);export{B as default};
