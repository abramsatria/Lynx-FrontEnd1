import{_ as d,l as c,a as m,c as h,b as n,d as a,w as p,t as g,r as f,o as y}from"./index-x0cUaSJO.js";const b={data(){return{about:c(),errors:{username:[],password:[],email:[]},response:null}},methods:{async register(l){this.errors={username:[],password:[],email:[]},this.response=null;const s=await m().register(l);if(s.success){if(this.about.track("Account Registered"),this.response="Registered!",this.$route.query.next)return this.$router.push(decodeURIComponent(this.$route.query.next));this.$router.push({path:"/dash/login",query:this.$route.query})}else s.message==="Field(s) are already used"?(Object.keys(s.details.exists).filter(e=>s.details.exists[e]).forEach(e=>{this.errors[e]=[`This ${e} already exists`]}),console.log(this.errors)):s.message==="Invalid field(s)"?(Object.keys(s.details.invalid).filter(e=>s.details.invalid[e]).forEach(e=>{this.errors[e]=[`This ${e} does not match the criteria`]}),console.log(this.errors)):this.response=s.message},gotoLogin(){this.$router.push({path:"/dash/login",query:this.$route.query})}}},w={class:"register"};function _(l,r,s,e,o,i){const t=f("FormKit");return y(),h("div",w,[r[1]||(r[1]=n("h2",null,"Register",-1)),a(t,{type:"form","submit-label":"Register","submit-attrs":{"button-type":"primary"},onSubmit:i.register},{default:p(()=>[a(t,{name:"username",type:"text",label:"Username",help:"Alphanumeric, underscores and periods allowed but not at the start or end of the username.",validation:[["required"],["matches",new RegExp("^(?=.{3,20}$)(?![_.])(?!.*[_.]{2})[a-zA-Z0-9._]+(?<![_.])$")]],"validation-messages":{matches:"Username does not match requirements."},errors:o.errors.username},null,8,["errors"]),a(t,{name:"email",type:"email",label:"Email",validation:"required:trim",errors:o.errors.email},null,8,["errors"]),a(t,{type:"password",name:"password",label:"Password",help:"At least 1 lowercase, 1 uppercase, 1 number and 1 special character. Minimum of 12 characters",validation:[["required"],["matches",/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*\W)(?!.* ).{12,}$/]],"validation-messages":{matches:"Password does not match requirements."},errors:o.errors.password},null,8,["errors"]),a(t,{type:"password",name:"password_confirm",label:"Confirm password",validation:"required|confirm:password","validation-label":"Password confirmation"})]),_:1},8,["onSubmit"]),n("p",null,g(o.response),1),n("a",{onClick:r[0]||(r[0]=(...u)=>i.gotoLogin&&i.gotoLogin(...u))},"Already have an account? Log in")])}const q=d(b,[["render",_],["__scopeId","data-v-5c3a84c6"]]);export{q as default};
