import{_ as c,a as d,g as l,r as w,o as m,c as f,b as i,d as r,w as h,t as P}from"./index-x0cUaSJO.js";const y={props:["data"],data(){return{account:d(),popups:l(),newData:{newPassword:"",newPasswordConfirmation:"",token:""},response:""}},methods:{async changePassword(){const p=await this.popups.addPopup("Verify",{async:!0}),s=await this.popups.addPopup("Loader"),o=this.data.account===this.account.account.id,a=await this.account.fetch("/user/password",{method:"PATCH",body:JSON.stringify({user:{password:this.newData.newPassword,account:this.data.account},verification:p})});if(this.popups.closePopup(s.id),!a.success)this.popups.addPopup("Information",{title:`Error updating ${o?"your":"their"} password`,description:a.message,buttons:[{name:"Retry",type:"primary",action:"return"},{name:"Cancel",type:"secondary",action:"close-all"}]});else{if(o&&(this.account.account=a.result.account),this.popups.closeSelf(this,{account:a.result.account}),this.account.preferences.reducedPopups)return;this.popups.addPopup("Information",{title:`Successfully updated ${o?"your":"their"} password`,buttons:[{name:"Okay",type:"primary",action:"close-all"}]})}}}},b={class:"changePassword"};function g(p,s,o,a,e,u){const t=w("FormKit");return m(),f("div",b,[s[2]||(s[2]=i("h2",null,"Change Password",-1)),r(t,{type:"form","submit-label":"Change Password","submit-attrs":{"button-type":"primary"},onSubmit:u.changePassword},{default:h(()=>[r(t,{type:"password",name:"password",label:"New Password",modelValue:e.newData.newPassword,"onUpdate:modelValue":s[0]||(s[0]=n=>e.newData.newPassword=n),autocomplete:"new-password",help:"At least 1 lowercase, 1 uppercase, 1 number and 1 special character. Minimum of 12 characters",validation:[["required"],["matches",/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&._-])[A-Za-z\d@$!%*?&._-]{12,}$/]]},null,8,["modelValue"]),r(t,{type:"password",label:"New Password Confirmation",modelValue:e.newData.newPasswordConfirmation,"onUpdate:modelValue":s[1]||(s[1]=n=>e.newData.newPasswordConfirmation=n),autocomplete:"new-password",validation:"required|confirm:password"},null,8,["modelValue"]),i("p",null,P(e.response),1)]),_:1},8,["onSubmit"])])}const _=c(y,[["render",g]]);export{_ as default};
