import{_ as i,a as l,g as m,r as d,o as h,c as f,b as u,d as r,w as y,t as g}from"./index-x0cUaSJO.js";const b={props:["data"],data(){return{account:l(),popups:m(),newData:{username:""},response:""}},methods:{async changeUsername(){const o=await this.popups.addPopup("Verify",{async:!0}),e=await this.popups.addPopup("Loader"),t=this.data.account===this.account.account.id,a=await this.account.fetch("/user/username",{method:"PATCH",body:JSON.stringify({user:{username:this.newData.username,account:this.data.account},verification:o})});if(this.popups.closePopup(e.id),!a.success)this.popups.addPopup("Information",{title:`Error updating ${t?"your":"their"} username`,description:a.message,buttons:[{name:"Retry",type:"primary",action:"return"},{name:"Cancel",type:"secondary",action:"close-all"}]});else{if(t&&(this.account.account=a.result.account),this.popups.closeSelf(this,{account:a.result.account}),this.account.preferences.reducedPopups)return;this.popups.addPopup("Information",{title:`Successfully updated ${t?"your":"their"} username`,buttons:[{name:"Okay",type:"primary",action:"close-all"}]})}}}},w={class:"changeUsername"};function _(o,e,t,a,s,c){const n=d("FormKit");return h(),f("div",w,[e[1]||(e[1]=u("h2",null,"Change Username",-1)),r(n,{type:"form","submit-label":"Change Username","submit-attrs":{"button-type":"primary"},onSubmit:c.changeUsername},{default:y(()=>[r(n,{type:"text",label:"New Username",modelValue:s.newData.username,"onUpdate:modelValue":e[0]||(e[0]=p=>s.newData.username=p),autocomplete:t.data.account===s.account.account.id?"username":"off"},null,8,["modelValue","autocomplete"]),u("p",null,g(s.response),1)]),_:1},8,["onSubmit"])])}const S=i(b,[["render",_]]);export{S as default};
