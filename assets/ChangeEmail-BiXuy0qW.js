import{_ as l,a as r,g as m,r as d,o as h,c as f,b as i,d as c,w as y,t as w}from"./index-x0cUaSJO.js";const g={props:["data"],data(){return{account:r(),popups:m(),newData:{newEmail:""},response:""}},methods:{async changeEmail(){const n=await this.popups.addPopup("Verify",{async:!0}),t=await this.popups.addPopup("Loader"),e=this.data.account===this.account.account.id,a=await this.account.fetch("/user/email",{method:"PATCH",body:JSON.stringify({user:{email:this.newData.newEmail,account:this.data.account},verification:n})});if(this.popups.closePopup(t.id),!a.success)this.popups.addPopup("Information",{title:`Error updating ${e?"your":"their"} email`,description:a.message,buttons:[{name:"Retry",type:"primary",action:"return"},{name:"Cancel",type:"secondary",action:"close-all"}]});else{if(e&&(this.account.account=a.result.account),this.popups.closeSelf(this,{account:a.result.account}),this.account.preferences.reducedPopups)return;this.popups.addPopup("Information",{title:`Successfully updated ${e?"your":"their"} email`,buttons:[{name:"Okay",type:"primary",action:"close-all"}]})}}}},E={class:"changeEmail"};function b(n,t,e,a,o,u){const s=d("FormKit");return h(),f("div",E,[t[1]||(t[1]=i("h2",null,"Change Email",-1)),c(s,{type:"form","submit-label":"Change Email","submit-attrs":{"button-type":"primary"},onSubmit:u.changeEmail},{default:y(()=>[c(s,{type:"email",label:"New Email",modelValue:o.newData.newEmail,"onUpdate:modelValue":t[0]||(t[0]=p=>o.newData.newEmail=p),autocomplete:e.data.account===o.account.account.id?"email":"off"},null,8,["modelValue","autocomplete"]),i("p",null,w(o.response),1)]),_:1},8,["onSubmit"])])}const P=l(g,[["render",b]]);export{P as default};
